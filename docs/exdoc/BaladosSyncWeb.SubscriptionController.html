<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.39.1">
    <meta name="project" content="Balados Sync v0.1.0">


    <title>BaladosSyncWeb.SubscriptionController â€” Balados Sync v0.1.0</title>

    <link rel="stylesheet" href="dist/html-elixir-ZFNMEJKT.css" />

    <script defer src="dist/sidebar_items-1EDF96F0.js"></script>
    <script defer src="docs_config.js"></script>
    <script defer src="dist/html-HBZYRXZS.js"></script>

  </head>
  <body>
    <script>(()=>{var t="ex_doc:settings",e="dark";var o="dark",s="light";var E="sidebar_state",n="closed";var r="sidebar_width";var a="sidebar-open";var i=new URLSearchParams(window.location.search),S=i.get("theme")||JSON.parse(localStorage.getItem(t)||"{}").theme;(S===o||S!==s&&window.matchMedia("(prefers-color-scheme: dark)").matches)&&document.body.classList.add(e);var d=sessionStorage.getItem(E),A=d!==n&&!window.matchMedia(`screen and (max-width: ${768}px)`).matches;document.body.classList.toggle(a,A);var c=sessionStorage.getItem(r);c&&document.body.style.setProperty("--sidebarWidth",`${c}px`);var p=/(Macintosh|iPhone|iPad|iPod)/.test(window.navigator.userAgent);document.documentElement.classList.toggle("apple-os",p);})();
</script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="https://balados.sync" class="sidebar-projectName" translate="no">
Balados Sync
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v0.1.0
        </div>
      </div>
    </div>
    <ul id="sidebar-list-nav" class="sidebar-list-nav" role="tablist" data-extras=""></ul>
  </div>
</nav>

<output role="status" id="toast"></output>

<main class="content page-module" id="main" data-type="modules">
  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of Balados Sync</span>
            <div class="search-input-wrapper">
              <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
              <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
                <i class="ri-close-line ri-lg" title="Cancel search"></i>
              </button>
            </div>
          </label>
        </form>
        <div class="autocomplete">
        </div>
        <div class="engine-selector" data-multiple="false">
          <button type="button" class="engine-button" aria-label="Select search engine" aria-haspopup="true" aria-expanded="false">
            <i class="ri-search-2-line" aria-hidden="true"></i>
            <span class="engine-name">Default</span>
            <i class="ri-arrow-down-s-line" aria-hidden="true"></i>
          </button>
          <div class="engine-dropdown" hidden role="menu">

              <button type="button"
                      class="engine-option"
                      data-engine-url="search.html?q="
                      role="menuitemradio"
                      aria-checked="true">
                <span class="name">Default</span>
                <span class="help">In-browser search</span>
              </button>

          </div>
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <div class="heading-with-actions top-heading">
    <h1>
      <span translate="no">BaladosSyncWeb.SubscriptionController</span> 
      <small class="app-vsn" translate="no">(Balados Sync v0.1.0)</small>

    </h1>

      <a href="https://github.com/yourusername/balados-sync/blob/main/apps/balados_sync_web/lib/balados_sync_web/controllers/subscription_controller.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

  </div>


    <section id="moduledoc">
<p>Controller for managing podcast subscriptions.</p><p>This controller handles subscribing, unsubscribing, and listing podcast subscriptions
for authenticated users. All operations use CQRS commands dispatched through the
Commanded dispatcher, ensuring events are properly recorded in the event store.</p><h2 id="module-routes" class="section-heading"><a href="#module-routes" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Routes</span></h2><ul><li><code class="inline">POST /api/v1/subscriptions</code> - Subscribe to a podcast</li><li><code class="inline">DELETE /api/v1/subscriptions/:feed</code> - Unsubscribe from a podcast</li><li><code class="inline">GET /api/v1/subscriptions</code> - List all active subscriptions</li></ul><h2 id="module-authentication" class="section-heading"><a href="#module-authentication" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Authentication</span></h2><p>All endpoints require JWT authentication. The JWT must contain:</p><ul><li><code class="inline">sub</code> (user_id)</li><li><code class="inline">device_id</code></li><li><code class="inline">device_name</code></li></ul><h2 id="module-data-encoding" class="section-heading"><a href="#module-data-encoding" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Data Encoding</span></h2><p>RSS feed URLs are base64-encoded as <code class="inline">rss_source_feed</code> for safe URL transmission.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#create/2" data-no-tooltip="" translate="no">create(conn, map)</a>

      </div>

        <div class="summary-synopsis"><p>Subscribes to a podcast feed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#delete/2" data-no-tooltip="" translate="no">delete(conn, map)</a>

      </div>

        <div class="summary-synopsis"><p>Unsubscribes from a podcast feed.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#index/2" data-no-tooltip="" translate="no">index(conn, params)</a>

      </div>

        <div class="summary-synopsis"><p>Lists all active subscriptions for the authenticated user.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#metadata/2" data-no-tooltip="" translate="no">metadata(conn, map)</a>

      </div>

        <div class="summary-synopsis"><p>Fetches fresh metadata for a podcast feed via AJAX.</p></div>

    </div>

</div>

  </section>


  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>

    <div class="functions-list">
<section class="detail" id="create/2">

  <div class="detail-header">
    <a href="#create/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">create(conn, map)</h1>


        <a href="https://github.com/yourusername/balados-sync/blob/main/apps/balados_sync_web/lib/balados_sync_web/controllers/subscription_controller.ex#L87" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Subscribes to a podcast feed.</p><p>Dispatches a <code class="inline">Subscribe</code> command that creates a <code class="inline">UserSubscribed</code> event in the event store.
The event is then projected to the subscriptions read model.</p><h2 id="create/2-parameters" class="section-heading"><a href="#create/2-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">rss_source_feed</code> - Base64-encoded RSS feed URL</li><li><code class="inline">rss_source_id</code> - Unique identifier for the podcast</li></ul><h2 id="create/2-example-request" class="section-heading"><a href="#create/2-example-request" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Request</span></h2><pre><code class="makeup elixir" translate="no"><span class="nc">POST</span><span class="w"> </span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">subscriptions</span><span class="w">
</span><span class="ss">Authorization</span><span class="p">:</span><span class="w"> </span><span class="nc">Bearer</span><span class="w"> </span><span class="n">eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9</span><span class="n">...</span><span class="w">
</span><span class="nc">Content</span><span class="o">-</span><span class="ss">Type</span><span class="p">:</span><span class="w"> </span><span class="n">application</span><span class="o">/</span><span class="n">json</span><span class="w">

</span><span class="p" data-group-id="5438444472-1">{</span><span class="w">
  </span><span class="ss">&quot;rss_source_feed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aHR0cHM6Ly9mZWVkcy5leGFtcGxlLmNvbS9wb2RjYXN0&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;rss_source_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;podcast-123&quot;</span><span class="w">
</span><span class="p" data-group-id="5438444472-1">}</span></code></pre><h2 id="create/2-example-response-success" class="section-heading"><a href="#create/2-example-response-success" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Response (Success)</span></h2><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="1513243599-1">{</span><span class="w">
  </span><span class="ss">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;success&quot;</span><span class="w">
</span><span class="p" data-group-id="1513243599-1">}</span></code></pre><h2 id="create/2-example-response-error" class="section-heading"><a href="#create/2-example-response-error" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Response (Error)</span></h2><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="3948728667-1">{</span><span class="w">
  </span><span class="ss">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;invalid_command&quot;</span><span class="w">
</span><span class="p" data-group-id="3948728667-1">}</span></code></pre>
  </section>
</section>
<section class="detail" id="delete/2">

  <div class="detail-header">
    <a href="#delete/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">delete(conn, map)</h1>


        <a href="https://github.com/yourusername/balados-sync/blob/main/apps/balados_sync_web/lib/balados_sync_web/controllers/subscription_controller.ex#L136" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Unsubscribes from a podcast feed.</p><p>Dispatches an <code class="inline">Unsubscribe</code> command that creates a <code class="inline">UserUnsubscribed</code> event.
The subscription remains in the database but is marked as unsubscribed.</p><h2 id="delete/2-parameters" class="section-heading"><a href="#delete/2-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">feed</code> - Base64-encoded RSS feed URL (from URL path)</li></ul><h2 id="delete/2-example-request" class="section-heading"><a href="#delete/2-example-request" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Request</span></h2><pre><code class="makeup elixir" translate="no"><span class="nc">DELETE</span><span class="w"> </span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">subscriptions</span><span class="o">/</span><span class="n">aHR0cHM6Ly9mZWVkcy5leGFtcGxlLmNvbS9wb2RjYXN0</span><span class="w">
</span><span class="ss">Authorization</span><span class="p">:</span><span class="w"> </span><span class="nc">Bearer</span><span class="w"> </span><span class="n">eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9</span><span class="n">...</span></code></pre><h2 id="delete/2-example-response-success" class="section-heading"><a href="#delete/2-example-response-success" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Response (Success)</span></h2><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="9187988755-1">{</span><span class="w">
  </span><span class="ss">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;success&quot;</span><span class="w">
</span><span class="p" data-group-id="9187988755-1">}</span></code></pre><h2 id="delete/2-example-response-error" class="section-heading"><a href="#delete/2-example-response-error" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Response (Error)</span></h2><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="1688207959-1">{</span><span class="w">
  </span><span class="ss">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;invalid_command&quot;</span><span class="w">
</span><span class="p" data-group-id="1688207959-1">}</span></code></pre>
  </section>
</section>
<section class="detail" id="index/2">

  <div class="detail-header">
    <a href="#index/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">index(conn, params)</h1>


        <a href="https://github.com/yourusername/balados-sync/blob/main/apps/balados_sync_web/lib/balados_sync_web/controllers/subscription_controller.ex#L189" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Lists all active subscriptions for the authenticated user.</p><p>Returns subscriptions from the read model where the subscription is currently active
(either never unsubscribed, or subscribed_at is more recent than unsubscribed_at).</p><h2 id="index/2-example-request" class="section-heading"><a href="#index/2-example-request" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Request</span></h2><pre><code class="makeup elixir" translate="no"><span class="nc">GET</span><span class="w"> </span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">subscriptions</span><span class="w">
</span><span class="ss">Authorization</span><span class="p">:</span><span class="w"> </span><span class="nc">Bearer</span><span class="w"> </span><span class="n">eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9</span><span class="n">...</span></code></pre><h2 id="index/2-example-response" class="section-heading"><a href="#index/2-example-response" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Response</span></h2><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="5624126420-1">{</span><span class="w">
  </span><span class="ss">&quot;subscriptions&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5624126420-2">[</span><span class="w">
    </span><span class="p" data-group-id="5624126420-3">{</span><span class="w">
      </span><span class="ss">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="ss">&quot;user_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user-123&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">&quot;rss_source_feed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aHR0cHM6Ly9mZWVkcy5leGFtcGxlLmNvbS9wb2RjYXN0&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">&quot;rss_source_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;podcast-123&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">&quot;subscribed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">&quot;unsubscribed_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">null</span><span class="p">,</span><span class="w">
      </span><span class="ss">&quot;inserted_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">&quot;updated_at&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2024-01-15T10:30:00Z&quot;</span><span class="w">
    </span><span class="p" data-group-id="5624126420-3">}</span><span class="w">
  </span><span class="p" data-group-id="5624126420-2">]</span><span class="w">
</span><span class="p" data-group-id="5624126420-1">}</span></code></pre>
  </section>
</section>
<section class="detail" id="metadata/2">

  <div class="detail-header">
    <a href="#metadata/2" class="detail-link" data-no-tooltip="" aria-label="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
    </a>
    <div class="heading-with-actions">
      <h1 class="signature" translate="no">metadata(conn, map)</h1>


        <a href="https://github.com/yourusername/balados-sync/blob/main/apps/balados_sync_web/lib/balados_sync_web/controllers/subscription_controller.ex#L239" class="icon-action" rel="help" aria-label="View Source">
          <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        </a>

    </div>
  </div>

  <section class="docstring">

<p>Fetches fresh metadata for a podcast feed via AJAX.</p><p>Returns parsed feed metadata (title, description, author, cover, etc.) from the RSS cache.
Used by the web interface to progressively load metadata for subscriptions.</p><h2 id="metadata/2-parameters" class="section-heading"><a href="#metadata/2-parameters" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Parameters</span></h2><ul><li><code class="inline">feed</code> - Base64-encoded RSS feed URL (from URL path)</li></ul><h2 id="metadata/2-example-request" class="section-heading"><a href="#metadata/2-example-request" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Request</span></h2><pre><code class="makeup elixir" translate="no"><span class="nc">GET</span><span class="w"> </span><span class="o">/</span><span class="n">api</span><span class="o">/</span><span class="n">v1</span><span class="o">/</span><span class="n">subscriptions</span><span class="o">/</span><span class="n">aHR0cHM6Ly9mZWVkcy5leGFtcGxlLmNvbS9wb2RjYXN0</span><span class="o">/</span><span class="n">metadata</span><span class="w">
</span><span class="ss">Authorization</span><span class="p">:</span><span class="w"> </span><span class="nc">Bearer</span><span class="w"> </span><span class="n">eyJhbGciOiJSUzI1NiIsInR5cCI6IkpXVCJ9</span><span class="n">...</span></code></pre><h2 id="metadata/2-example-response-success" class="section-heading"><a href="#metadata/2-example-response-success" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Response (Success)</span></h2><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="1707695647-1">{</span><span class="w">
  </span><span class="ss">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1707695647-2">{</span><span class="w">
    </span><span class="ss">&quot;title&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Example Podcast&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;A great podcast about...&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">&quot;author&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;John Doe&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">&quot;cover&quot;</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1707695647-3">{</span><span class="w">
      </span><span class="ss">&quot;src&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://example.com/cover.jpg&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">&quot;srcset&quot;</span><span class="p">:</span><span class="w"> </span><span class="n">null</span><span class="w">
    </span><span class="p" data-group-id="1707695647-3">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;en&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">&quot;episodes_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="w">
  </span><span class="p" data-group-id="1707695647-2">}</span><span class="w">
</span><span class="p" data-group-id="1707695647-1">}</span></code></pre><h2 id="metadata/2-example-response-error" class="section-heading"><a href="#metadata/2-example-response-error" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i></a><span class="text">Example Response (Error)</span></h2><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="9636882328-1">{</span><span class="w">
  </span><span class="ss">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Invalid feed encoding&quot;</span><span class="w">
</span><span class="p" data-group-id="9636882328-1">}</span></code></pre>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="Balados Sync.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.39.1) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>
<script>
  // Add custom JavaScript for enhanced documentation experience
  document.addEventListener('DOMContentLoaded', function() {
    // Add badges to module names
    const moduleHeaders = document.querySelectorAll('.content h1');
    moduleHeaders.forEach(header => {
      if (header.textContent.includes('Command')) {
        const badge = document.createElement('span');
        badge.textContent = 'Command';
        badge.className = 'badge badge-command';
        badge.style = 'background: #4CAF50; color: white; padding: 2px 8px; border-radius: 3px; font-size: 12px; margin-left: 10px;';
        header.appendChild(badge);
      } else if (header.textContent.includes('Event')) {
        const badge = document.createElement('span');
        badge.textContent = 'Event';
        badge.className = 'badge badge-event';
        badge.style = 'background: #2196F3; color: white; padding: 2px 8px; border-radius: 3px; font-size: 12px; margin-left: 10px;';
        header.appendChild(badge);
      }
    });
  });
</script>

  </body>
</html>
